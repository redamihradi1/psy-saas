{% extends 'base.html' %}

 

{% block title %}{{ title }}{% endblock %}

 

{% block content %}

<div class="container mx-auto px-4 py-6 max-w-3xl">

  <!-- Header -->

  <div class="mb-6">

    <a href="{% url 'tests_psy:beck_liste' %}" class="text-primary hover:text-primary-dark mb-4 inline-block">

      <i class="fas fa-arrow-left mr-2"></i>Retour à la liste

    </a>

    <h1 class="text-3xl font-bold text-gray-900">{{ title }}</h1>

    <p class="text-gray-600 mt-2">Inventaire de dépression de Beck (BDI-II)</p>

  </div>

 

  <!-- Info card -->

  <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">

    <div class="flex">

      <div class="flex-shrink-0">

        <i class="fas fa-info-circle text-blue-400 text-xl"></i>

      </div>

      <div class="ml-3">

        <p class="text-sm text-blue-700">

          <strong>À propos du test Beck :</strong><br>

          Le BDI-II est un questionnaire de 21 items évaluant la sévérité des symptômes dépressifs.

          Durée : environ 10 minutes.

        </p>

      </div>

    </div>

  </div>

 

  <!-- Formulaire -->

  <div class="bg-white rounded-lg shadow-md p-6">

    <form method="post" class="space-y-6">

      {% csrf_token %}

 

      <!-- Sélection patient -->

      <div>

        <label for="{{ form.patient.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">

          {{ form.patient.label }} <span class="text-red-500">*</span>

        </label>

        {{ form.patient }}

        {% if form.patient.errors %}

        <p class="mt-2 text-sm text-red-600">{{ form.patient.errors.0 }}</p>

        {% endif %}

      </div>

 

      <!-- Info patient si pré-sélectionné -->

      {% if patient %}

      <div class="bg-gray-50 rounded-lg p-4">

        <h3 class="font-semibold text-gray-900 mb-2">Informations patient</h3>

        <div class="grid grid-cols-2 gap-4 text-sm">

          <div>

            <span class="text-gray-600">Nom :</span>

            <span class="font-medium ml-2">{{ patient.nom_complet }}</span>

          </div>

          <div>

            <span class="text-gray-600">Âge :</span>

            <span class="font-medium ml-2">{{ patient.age }} ans</span>

          </div>

          <div>

            <span class="text-gray-600">Date de naissance :</span>

            <span class="font-medium ml-2">{{ patient.date_naissance|date:"d/m/Y" }}</span>

          </div>

          <div>

            <span class="text-gray-600">Catégorie :</span>

            <span class="font-medium ml-2">{{ patient.get_categorie_age_display }}</span>

          </div>

        </div>

      </div>

      {% endif %}

 

      <!-- Instructions -->

      <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">

        <div class="flex">

          <div class="flex-shrink-0">

            <i class="fas fa-lightbulb text-yellow-400 text-xl"></i>

          </div>

          <div class="ml-3">

            <p class="text-sm text-yellow-700">

              <strong>Instructions :</strong><br>

              Une fois le test créé, vous pourrez procéder à la passation.

              Le patient répondra aux 21 items en cochant les affirmations qui correspondent le mieux à son état actuel.

            </p>

          </div>

        </div>

      </div>

 

      <!-- Boutons -->

      <div class="flex justify-end space-x-4">

        <a href="{% url 'tests_psy:beck_liste' %}" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition">

          Annuler

        </a>

        <button type="submit" class="px-6 py-2 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg transition shadow-md">

          <i class="fas fa-check mr-2"></i>Créer et commencer

        </button>

      </div>

    </form>

  </div>

</div>

{% endblock %}